var TKTinhHinh=React.createClass({displayName:"TKTinhHinh",getInitialState:function(){return{headers:[],data:[]}},componentWillMount:function(){this.loadData()},loadData:function(){$.ajax({url:"/truongkhoa/lop/"+this.props.lop_id+"/tinhhinh",method:"GET",success:function(t){this.setState({headers:t.headers,data:t.data})}.bind(this)})},render:function(){var t=this.state.headers.map(function(t){return React.DOM.td(null,t.tuan)}),a=this.state.data.map(function(t,a){var e=t.data.map(function(t){return React.DOM.td(null,t)});return React.DOM.tr({className:a%2===0?"danger":"warning"},React.DOM.td(null,a+1),React.DOM.td(null,t.hovaten,React.DOM.br(null),t.code,React.DOM.br(null),t.ma_lop_hanh_chinh),e)});return React.DOM.div({className:"table-responsive"},React.DOM.table({className:"table table-bordered"},React.DOM.thead(null,React.DOM.tr({className:"success"},React.DOM.td(null,"Stt"),React.DOM.td(null,"Sinh viên"),t)),React.DOM.tbody(null,a)))}}),TKLichTrinh=React.createClass({displayName:"TKLichTrinh",getInitialState:function(){return{data:[]}},loadData:function(){$.ajax({url:"/truongkhoa/lop/"+this.props.lop_id+"/lichtrinh",method:"GET",success:function(t){this.setState({data:t})}.bind(this)})},componentWillMount:function(){this.loadData()},render:function(){var t=this.state.data.map(function(t,a){return React.DOM.tr({className:a%2===0?"danger":"warning"},React.DOM.td(null,t.tuan),React.DOM.td(null,React.DOM.span({dangerouslySetInnerHTML:{__html:t.noi_dung}})),React.DOM.td(null,t.so_tiet),React.DOM.td(null,React.DOM.span({dangerouslySetInnerHTML:{__html:t.thoi_gian}})))});return React.DOM.div({className:"table-responsive"},React.DOM.table({className:"table table-bordered"},React.DOM.thead(null,React.DOM.tr({className:"success"},React.DOM.td(null,"Tuần"),React.DOM.td(null,"Nội dung"),React.DOM.td(null,"Số tiết"),React.DOM.td(null,"Thời gian"))),React.DOM.tbody(null,t)))}}),Lop=React.createClass({displayName:"Lop",getInitialState:function(){return{data:{},lichtrinhs:[]}},loadData:function(){$.ajax({url:"/truongkhoa/lop/"+this.props.lop_id,method:"GET",success:function(t){this.setState({data:t})}.bind(this)})},componentWillMount:function(){this.loadData()},updateInfo:function(t,a){$.ajax({url:"/truongkhoa/update",method:"POST",data:{lop_id:this.props.lop_id,type:t,maction:a},success:function(t){this.setState({data:t})}.bind(this)})},onApproveThongSo:function(){this.updateInfo(1,1)},onRejectThongSo:function(){this.updateInfo(1,0)},onApproveLichTrinh:function(){this.updateInfo(2,1)},onRejectLichTrinh:function(){this.updateInfo(2,0)},onApproveTinhHinh:function(){this.updateInfo(3,1)},onRejectTinhHinh:function(){this.updateInfo(3,0)},render:function(){return React.DOM.div(null,React.DOM.div({className:"table-responsive"},React.DOM.table({className:"table table-bordered"},React.DOM.thead(null,React.DOM.tr({className:"success"},React.DOM.td(null,"Giảng viên"),React.DOM.td(null,"Mã lớp"),React.DOM.td(null,"Tên môn học"),React.DOM.td(null,"Duyệt đề cương"),React.DOM.td(null,"Duyệt lịch trình"),React.DOM.td(null,"Duyệt tình hình"))),React.DOM.tbody(null,React.DOM.tr({className:"success"},React.DOM.td(null,this.state.data.giang_viens),React.DOM.td(null,this.state.data.ma_lop),React.DOM.td(null,this.state.data.ten_mon_hoc),React.DOM.td(null,this.state.data.duyet_thong_so_status),React.DOM.td(null,this.state.data.duyet_lich_trinh_status),React.DOM.td(null,this.state.data.duyet_tinh_hinh_status))))),React.DOM.div({className:"panel-group",id:"accordion"},React.DOM.div({className:"panel panel-default"},React.DOM.div({className:"panel-heading"},React.DOM.h4({className:"panel-title"},React.DOM.a({"data-toggle":"collapse","data-parent":"#accordion",href:"#dcct"}," Đề cương chi tiết "))),React.DOM.div({id:"dcct",className:"panel-collapse collapse"},React.DOM.div({className:"panel-body"},React.DOM.button({className:"btn btn-sm btn-primary",style:{display:this.state.data.can_approve_thong_so===!1?"none":""},onClick:this.onApproveThongSo},"Duyệt"),React.DOM.button({className:"btn btn-sm btn-warning",style:{display:this.state.data.can_reject_thong_so===!1?"none":""},onClick:this.onRejectThongSo},"Không duyệt"),React.DOM.hr(null),React.DOM.span({dangerouslySetInnerHTML:{__html:this.state.data.de_cuong_chi_tiet_html}})))),React.DOM.div({className:"panel panel-default"},React.DOM.div({className:"panel-heading"},React.DOM.h4({className:"panel-title"},React.DOM.a({"data-toggle":"collapse","data-parent":"#accordion",href:"#ltth"}," Lịch trình thực hiện "))),React.DOM.div({id:"ltth",className:"panel-collapse collapse"},React.DOM.div({className:"panel-body"},React.DOM.button({className:"btn btn-sm btn-primary",style:{display:this.state.data.can_approve_lich_trinh===!1?"none":""},onClick:this.onApproveLichTrinh},"Duyệt"),React.DOM.button({className:"btn btn-sm btn-warning",style:{display:this.state.data.can_reject_lich_trinh===!1?"none":""},onClick:this.onRejectLichTrinh},"Không duyệt"),React.DOM.hr(null),TKLichTrinh({lop_id:this.props.lop_id})))),React.DOM.div({className:"panel panel-default"},React.DOM.div({className:"panel-heading"},React.DOM.h4({className:"panel-title"},React.DOM.a({"data-toggle":"collapse","data-parent":"#accordion",href:"#thht"}," Tình hình học tập "))),React.DOM.div({id:"thht",className:"panel-collapse collapse"},React.DOM.div({className:"panel-body"},React.DOM.button({className:"btn btn-sm btn-primary",style:{display:this.state.data.can_approve_tinh_hinh===!1?"none":""},onClick:this.onApproveTinhHinh},"Duyệt"),React.DOM.button({className:"btn btn-sm btn-warning",style:{display:this.state.data.can_reject_tinh_hinh===!1?"none":""},onClick:this.onRejectTinhHinh},"Không duyệt"),React.DOM.hr(null),TKTinhHinh({lop_id:this.props.lop_id}))))))}});React.renderComponent(Lop({lop_id:ENV.lop_id}),document.getElementById("tkmain"));