var ThanhTra=React.createClass({displayName:"ThanhTra",getInitialState:function(){return{data:[]}},loadData:function(){$.ajax({url:"/teacher/lich_trinh_giang_days/thanhtra",success:function(t){this.setState({data:t})}.bind(this)})},handleUpdate:function(t){$.ajax({url:"/teacher/lich_trinh_giang_days/thanhtraupdate",type:"POST",data:t,success:function(t){this.setState({data:t})}.bind(this)})},handleAccept:function(t){$.ajax({url:"/teacher/lich_trinh_giang_days/accept",type:"POST",data:t,success:function(t){this.setState({data:t})}.bind(this)})},handleRequest:function(t){$.ajax({url:"/teacher/lich_trinh_giang_days/request",type:"POST",data:t,success:function(t){this.setState({data:t})}.bind(this)})},componentWillMount:function(){this.loadData()},render:function(){var t=this;if(this.state.data.length>0){var a=this.state.data.map(function(a,e){return ThanhTraRow({date:t.state.date,onAccept:t.handleAccept,onRequest:t.handleRequest,onUpdate:t.handleUpdate,data:a,stt:e+1,color:e%2===0?"danger":"warning"})});return React.DOM.div(null,React.DOM.hr(null),React.DOM.div({className:"table-responsive"},React.DOM.table({className:"table table-bordered"},React.DOM.colgroup(null,React.DOM.col({style:{width:"5%"}}),React.DOM.col({style:{width:"30%"}}),React.DOM.col({style:{width:"10%"}}),React.DOM.col({style:{width:"15%"}}),React.DOM.col({style:{width:"15%"}}),React.DOM.col({style:{width:"15%"}}),React.DOM.col({style:{width:"10%"}})),React.DOM.thead(null,React.DOM.tr({className:"success"},React.DOM.td(null,"Stt"),React.DOM.td(null,"Giờ học"),React.DOM.td(null,"Báo lỗi"),React.DOM.td(null,"Note 1"),React.DOM.td(null,"Note 2"),React.DOM.td(null,"Note 3"),React.DOM.td(null,"Thao tác"))),React.DOM.tbody(null,a))))}return React.DOM.div(null)}}),ThanhTraRow=React.createClass({displayName:"ThanhTraRow",getInitialState:function(){return{edit:0}},onEdit:function(){this.setState({edit:1})},onCancel:function(){this.setState({edit:0})},onUpdate:function(){this.setState({edit:0});var t=this.refs.note2.getDOMNode().value;this.props.onUpdate({lich_id:this.props.data.id,note2:t})},onAccept:function(){this.props.onAccept({lich_id:this.props.data.id})},onRequest:function(){this.props.onRequest({lich_id:this.props.data.id})},componentDidUpdate:function(){1===this.state.edit&&(this.refs.note2.getDOMNode().value=this.props.data.note2)},render:function(){return 0===this.state.edit?React.DOM.tr({className:this.props.color},React.DOM.td(null,this.props.stt),React.DOM.td(null,React.DOM.span({dangerouslySetInnerHTML:{__html:this.props.data.info}})),React.DOM.td(null,React.DOM.span({className:this.props.data.di_muon_color},this.props.data.di_muon_alias),React.DOM.br(null),React.DOM.br(null),React.DOM.span({className:this.props.data.ve_som_color},this.props.data.ve_som_alias),React.DOM.br(null),React.DOM.br(null),React.DOM.span({className:this.props.data.bo_tiet_color},this.props.data.bo_tiet_alias)),React.DOM.td(null,React.DOM.span({dangerouslySetInnerHTML:{__html:this.props.data.note1_html}})),React.DOM.td(null,React.DOM.span({dangerouslySetInnerHTML:{__html:this.props.data.note2_html}})),React.DOM.td(null,React.DOM.span({dangerouslySetInnerHTML:{__html:this.props.data.note3_html}})),React.DOM.td(null,React.DOM.button({style:{display:this.props.data.can_giang_vien_edit===!0?"":"none"},onClick:this.onEdit,className:"btn btn-sm btn-success"},"Edit"),React.DOM.button({style:{display:this.props.data.can_accept===!0?"":"none"},onClick:this.onAccept,className:"btn btn-sm btn-primary"},"Chấp nhận"),React.DOM.button({style:{display:this.props.data.can_request===!0?"":"none"},onClick:this.onRequest,className:"btn btn-sm btn-warning"},"Yêu cầu xác minh"))):React.DOM.tr({className:this.props.color},React.DOM.td(null,this.props.stt),React.DOM.td(null,React.DOM.span({dangerouslySetInnerHTML:{__html:this.props.data.info}})),React.DOM.td(null,React.DOM.span({className:this.props.data.di_muon_color},this.props.data.di_muon_alias),React.DOM.br(null),React.DOM.br(null),React.DOM.span({className:this.props.data.ve_som_color},this.props.data.ve_som_alias),React.DOM.br(null),React.DOM.br(null),React.DOM.span({className:this.props.data.bo_tiet_color},this.props.data.bo_tiet_alias)),React.DOM.td(null,this.props.data.note1),React.DOM.td(null,React.DOM.textarea({ref:"note2",style:{width:"100%",height:"200px"}})),React.DOM.td(null,this.props.data.note3),React.DOM.td(null,React.DOM.button({onClick:this.onCancel,className:"btn btn-sm btn-default"},"Hủy"),React.DOM.button({onClick:this.onUpdate,className:"btn btn-sm btn-success"},"Cập nhật"),React.DOM.button({style:{display:this.props.data.can_giang_vien_edit===!0?"":"none"},onClick:this.onEdit,className:"btn btn-sm btn-success"},"Edit"),React.DOM.button({style:{display:this.props.data.can_accept===!0?"":"none"},onClick:this.onAccept,className:"btn btn-sm btn-primary"},"Chấp nhận"),React.DOM.button({style:{display:this.props.data.can_request===!0?"":"none"},onClick:this.onRequest,className:"btn btn-sm btn-warning"},"Yêu cầu xác minh")))}});