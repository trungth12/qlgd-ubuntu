var Grade2=React.createClass({displayName:"Grade2",getInitialState:function(){return{data:[],headers:[]}},loadData:function(){$.ajax({url:"/teacher/lop/"+this.props.lop+"/submissions2.json",success:function(t){this.setState({data:t.results,headers:t.headers}),React.unmountAndReleaseReactRootNode(document.getElementById("grades2")),React.renderComponent(GroupGrade({lop:this.props.lop}),document.getElementById("grades2"))}.bind(this)})},onUpdate:function(t){return $.ajax({url:"/teacher/lop/"+this.props.lop+"/submissions2",type:"POST",data:t,success:function(t){this.setState({data:t.results,headers:t.headers}),React.unmountAndReleaseReactRootNode(document.getElementById("assignment")),React.renderComponent(Assignments({lop:this.props.lop}),document.getElementById("assignment")),React.unmountAndReleaseReactRootNode(document.getElementById("grades2")),React.renderComponent(GroupGrade({lop:this.props.lop}),document.getElementById("grades2"))}.bind(this)}),!1},componentWillMount:function(){this.loadData()},render:function(){var t=this,e=this.state.headers.map(function(t){return React.DOM.td(null,t.assignment_name," (",t.points,")")}),a=this.state.data.map(function(e){return GradeRow({hovaten:e.hovaten,code:e.code,ma_lop_hanh_chinh:e.ma_lop_hanh_chinh,diem_qua_trinh:e.diem_qua_trinh,tinhhinh:e.tinhhinh,onUpdate:t.onUpdate,data:e.submissions})});return React.DOM.div({className:"table-responsive"},React.DOM.table({className:"table table-bordered"},React.DOM.thead(null,React.DOM.tr({className:"success"},React.DOM.td(null,"Họ và tên"),React.DOM.td(null,"Tình hình đi học"),e,React.DOM.td(null,"Điểm quá trình"))),React.DOM.tbody(null,a)))}}),GroupGrade=React.createClass({displayName:"GroupGrade",getInitialState:function(){return{data:[],headers:[]}},loadData:function(){$.ajax({url:"/teacher/lop/"+this.props.lop+"/group_submissions",success:function(t){this.setState({data:t.results,headers:t.headers})}.bind(this)})},componentWillMount:function(){this.loadData()},render:function(){var t=this.state.headers.map(function(t){return React.DOM.td(null,t.group_name," (",t.weight,"%)")}),e=this.state.data.map(function(t){return GroupGradeRow({hovaten:t.hovaten,code:t.code,tinhhinh:t.tinhhinh,ma_lop_hanh_chinh:t.ma_lop_hanh_chinh,diem_qua_trinh:t.diem_qua_trinh,data:t.group_submissions})});return React.DOM.div({className:"table-responsive"},React.DOM.table({className:"table table-bordered"},React.DOM.thead(null,React.DOM.tr({className:"success"},React.DOM.td(null,"Họ và tên"),React.DOM.td(null,"Tình hình đi học"),t,React.DOM.td(null,"Điểm quá trình"))),React.DOM.tbody(null,e)))}}),GroupGradeRow=React.createClass({displayName:"GroupGradeRow",render:function(){var t=this.props.data.map(function(t){return GroupGradeCell({data:t})});return React.DOM.tr(null,React.DOM.td(null,React.DOM.div(null,this.props.hovaten,React.DOM.br(null),this.props.code,React.DOM.br(null),this.props.ma_lop_hanh_chinh)),React.DOM.td(null,React.DOM.div({className:"progress"},React.DOM.div({className:"progress-bar progress-bar-success",style:{width:100-this.props.tinhhinh+"%"}},React.DOM.span(null,100-this.props.tinhhinh+"%")),React.DOM.div({className:"progress-bar progress-bar-danger",style:{width:this.props.tinhhinh+"%"}},React.DOM.span(null,this.props.tinhhinh+"%")))),t,React.DOM.td(null,this.props.diem_qua_trinh))}}),GroupGradeCell=React.createClass({displayName:"GroupGradeCell",render:function(){return React.DOM.td(null,this.props.data.grade)}}),GradeRow=React.createClass({displayName:"GradeRow",render:function(){var t=this,e=this.props.data.map(function(e){return GradeCell({onUpdate:t.props.onUpdate,data:e})});return React.DOM.tr(null,React.DOM.td(null,React.DOM.div(null,this.props.hovaten,React.DOM.br(null),this.props.code,React.DOM.br(null),this.props.ma_lop_hanh_chinh)),React.DOM.td(null,React.DOM.div({className:"progress"},React.DOM.div({className:"progress-bar progress-bar-success",style:{width:100-this.props.tinhhinh+"%"}},React.DOM.span(null,100-this.props.tinhhinh+"%")),React.DOM.div({className:"progress-bar progress-bar-danger",style:{width:this.props.tinhhinh+"%"}},React.DOM.span(null,this.props.tinhhinh+"%")))),e,React.DOM.td(null,this.props.diem_qua_trinh))}}),DisabledGradeCell=React.createClass({displayName:"DisabledGradeCell",render:function(){return React.DOM.td(null,React.DOM.div(null,this.props.data.grade),React.DOM.button({className:"btn btn-sm btn-primary",onClick:this.props.onEdit},"Sửa"))}}),LiveGradeCell=React.createClass({displayName:"LiveGradeCell",onUpdate:function(){this.props.data.grade=this.refs.grade.getDOMNode().value,this.props.onUpdate(this.props.data)},render:function(){return React.DOM.td(null,React.DOM.input({type:"text",ref:"grade",id:"grade"}),React.DOM.button({className:"btn btn-danger",onClick:this.props.onCancel},"Hủy"),React.DOM.button({className:"btn btn-success",onClick:this.onUpdate},"Cập nhật"))}}),GradeCell=React.createClass({displayName:"GradeCell",getInitialState:function(){return{edit:0}},onEdit:function(){this.setState({edit:1})},onCancel:function(){this.setState({edit:0})},onUpdate:function(t){this.setState({edit:0}),this.props.onUpdate(t)},componentDidUpdate:function(){1===this.state.edit&&($("#grade").focus(),$("#grade").val(this.props.data.grade))},render:function(){return 0===this.state.edit?DisabledGradeCell({data:this.props.data,onEdit:this.onEdit}):LiveGradeCell({data:this.props.data,onCancel:this.onCancel,onUpdate:this.onUpdate})}});